<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Brotherhood of Failures - Story Archive</title>
    <script src="script.js" defer></script>
   
</head>
<body class = "fade-in">
    <div class="navbar">
        <div class="logo">
            <a href="main.html">
                <img src="Screenshot_2024-09-25_234452-removebg-preview.png" alt="Brotherhood of Failures Logo">
            </a>
        </div>

        <div class="button1">
            <a href="index.html">Brotherhood of Failures</a>
        </div>

        <div class="button2">
            <a href="story.html">Submit a Story</a>
        </div>

        <div class="button3">
            <a href="archive.html">Story Archive</a>
        </div>

        <div class="button4">
            <a href="resources.html">Resources</a>
        </div>

        <div class="button5">
            <a href="us.html">About Us</a>
        </div>
    </div>

    <h2 class = "S-A">Story Archive</h2>

    <!-- Archive container where stories will be displayed -->
    <div id="archiveContainer" class="archive-container"></div>

    <script>
        // Function to load stories from localStorage and display them
        function loadStories() {
            const archiveContainer = document.getElementById("archiveContainer");
    
            // Get the stories from localStorage
            const stories = JSON.parse(localStorage.getItem("stories")) || [];
    
            // Check if there are no stories
            if (stories.length === 0) {
                archiveContainer.innerHTML = "<p>No stories have been submitted yet.</p>";
                return;
            }
    
            // Loop through each story and display it in the archive
            stories.forEach((story, index) => {
                const storyCard = document.createElement("div");
                storyCard.classList.add("story-card");
    
                // Populate the story card with content
                storyCard.innerHTML = `
                    <button class="delete-btn" data-index="${index}">X</button>
                    <h3>${story.prompt}</h3>
                    <p><strong>${story.name}:</strong> ${story.story}</p>
                    <time>${story.date}</time>
                   <div class="story-buttons">
    <button class="me-too-btn" data-id="${story.id}">
        <img src="thumb.png" alt="Thumbs Up" class="thumbs-up-icon"> 
        <span class="me-too-counter">${story.meTooCount || 0}</span> Me Too
    </button>
    <button class="heart-btn" data-id="${story.id}">
        <img src="pheart.png" alt="Heart Icon" class="heart-icon"> 
        <span class="heart-counter">${story.heartCount || 0}</span> Heart
    </button>
</div>

                `;
    
                // Add delete functionality
                storyCard.querySelector(".delete-btn").addEventListener("click", function() {
                    deleteStory(index);
                });
    
                // Append the story card to the archive container
                archiveContainer.appendChild(storyCard);
            });
        }
    
        // Function to delete a story from localStorage
        function deleteStory(index) {
            let stories = JSON.parse(localStorage.getItem("stories")) || [];
            stories.splice(index, 1); // Remove the story at the given index
            localStorage.setItem("stories", JSON.stringify(stories)); // Update localStorage
            location.reload(); // Reload the page to reflect the deletion
        }
    
        // Load stories when the page loads
        window.onload = loadStories;
    </script>
    
    
<!-- archive.html -->
<div id="archiveContainer">

</div>





    <script src="script.js"></script>
    <div class="cloud cloud1"></div>
    <div class="cloud cloud2"></div>
    <div class="cloud cloud3"></div>
    <div class="cloud cloud4"></div>
   
<audio id="backgroundMusic" src="river.mp3" loop muted></audio>

<script>
    const audio = document.getElementById('backgroundMusic');
    
    window.addEventListener('load', () => {
        const savedTime = localStorage.getItem('audioCurrentTime');
        if (savedTime) {
            audio.currentTime = savedTime;
        }
        audio.muted = false; // Unmute the audio
        audio.play();
    });

    window.addEventListener('beforeunload', () => {
        localStorage.setItem('audioCurrentTime', audio.currentTime);
    });
</script>
     
</body>
</html>
